// Функция для создания собственного централизованного хранилища состояния (ЦХС)
export function createStore(reducer, initialState) {
    let state = initialState;     // Храним текущее состояние приложения
    let listeners = [];           // Список функций (подписчиков), которые вызываем при изменении состояния

    return {
        // Метод для получения текущего состояния
        getState() {
            return state;             // Возвращаем актуальное состояние
        },

        // Метод для отправки действия (action), который изменит состояние через редьюсер
        dispatch(action) {
            state = reducer(state, action);  // Обновляем состояние, вызывая редьюсер с текущим состоянием и экшеном
            listeners.forEach(fn => fn());   // После обновления вызываем всех подписчиков для обновления интерфейса
        },

        // Метод для подписки на изменения состояния
        subscribe(fn) {
            listeners.push(fn);   // Добавляем функцию-слушатель в массив
        }
    };
}
